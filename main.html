<!DOCTYPE html>
<head>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/redux/4.2.0/redux.min.js"></script>
</head>
<body>
  <div id="subject"></div>
  <div id="toc"></div>
  <div id="control"></div>
  <div id="content"></div>
  <script>
    function subject () {
      document.querySelector('#subject').innerHTML = `
      <header>
        <h1>WEB</h1>
        Hello, WEB
      </header>
      `
    }
    function TOC () {
      const state = store.getState()
      let liTags = ''
      state.contents.map( e => {
        liTags = liTags + `<li><a onclick="
          event.preventDefault()
          const action = {type:'SELECT', id:${e.id}}
          store.dispatch(action)
          " href="${e.id}.html">${e.title}</a></li>`
      })
      document.querySelector('#toc').innerHTML = `
      <nav>
        <ol>
          ${liTags}
        </ol>
      </nav>
      `
    }
    function control () {
      document.querySelector('#control').innerHTML = `
      <ul>
        <li><a href="/create">create</a></li>
        <li><input type="button" value="delete"></li>
      </ul>
      `
    }
    function article () {
      const state = store.getState()
      const content = state.contents.filter(e => e.id === state.selected_id)
      document.querySelector('#content').innerHTML = `
      <article>
        <h2>${content[0].title}</h2>
        ${content[0].desc}
      </article>
      `
    }
    function reducer (state, action) {
      if (state === undefined) {
        return {
          selected_id: 1,
          contents: [
            {id:1, title:'HTML', desc:'HTML is...'},
            {id:2, title:'CSS', desc:'CSS is...'}
          ]
        }
      }
      let newState = {}
      if (action.type === 'SELECT') {
        newState = Object.assign(newState, state, {selected_id: action.id})
      }
      return newState
    }
    const store = Redux.createStore(reducer)
    store.subscribe(article)
    subject()
    TOC()
    control()
    article()
  </script>
</body>
</html>